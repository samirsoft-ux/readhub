<div class="button-list">
  <!-- Botón Préstamo de libro -->
  <div class="control" id="button_reserva">
    <button class="button is-primary is-fullwidth" onclick="toggleForm('addEntry_reserva', 'button_reserva')">Préstamo de libro</button>
  </div>

  <form id="addEntry_reserva" class="hidden-form">
    <div class="field">
      <label class="label">Name</label>
      <div class="control">
        <input class="input" type="text" placeholder="your name" id="name_reserva" required>
      </div>
    </div>
    <div class="field">
      <label class="label">Email</label>
      <div class="control">
        <input class="input" type="email" placeholder="your email" id="email_reserva" required>
      </div>
    </div>
    <div class="field">
      <label class="label">Comment</label>
      <div class="control">
        <textarea class="textarea" placeholder="your comment" id="comment_reserva" required></textarea>
      </div>
    </div>
    <div class="control">
      <button class="button is-primary is-fullwidth">Pedir prestado</button>
    </div>
    <div class="control">
      <button class="button is-danger is-fullwidth" onclick="cancelForm('addEntry_reserva', 'button_reserva')">Cancelar la solicitud</button>
    </div>
  </form>

  <script>
    function toggleForm(formId, buttonId) {
      const form = document.getElementById(formId);
      const button = document.getElementById(buttonId);
      if (form.style.display === 'none' || form.style.display === '') {
        form.style.display = 'block';
        button.style.display = 'none';
        restoreRequiredAttributes(form);
      } else {
        form.style.display = 'none';
        button.style.display = 'block';
      }
    }

    function cancelForm(formId, buttonId) {
      const form = document.getElementById(formId);
      const button = document.getElementById(buttonId);
      removeRequiredAttributes(form);
      form.style.display = 'none';
      button.style.display = 'block';
    }

    function removeRequiredAttributes(form) {
      const elements = form.querySelectorAll('[required]');
      elements.forEach(el => {
        el.dataset.required = 'true';
        el.removeAttribute('required');
      });
    }

    function restoreRequiredAttributes(form) {
      const elements = form.querySelectorAll('[data-required="true"]');
      elements.forEach(el => {
        el.setAttribute('required', '');
        el.removeAttribute('data-required');
      });
    }
  </script>
</div>
